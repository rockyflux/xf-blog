import{_ as h}from"./chunks/ArticleMetadata.DRjrHxp2.js";import{_ as r,C as o,c as k,o as t,j as l,G as d,a4 as c,a as g,w as E,b as u,e as y}from"./chunks/framework.TNqKmmQz.js";import"./chunks/theme.5WaCU3Xi.js";const S=JSON.parse('{"title":"Skill 与 MCP 深度对比（一）：Token 占用与设计模式","description":"","frontmatter":{},"headers":[],"relativePath":"ai/tools/2026/01/17/Skill与MCP对比（一）-Token占用.md","filePath":"ai/tools/2026/01/17/Skill与MCP对比（一）-Token占用.md","lastUpdated":1768906306000}'),m={name:"ai/tools/2026/01/17/Skill与MCP对比（一）-Token占用.md"};function C(a,s,b,F,q,_){const e=h,p=o("ClientOnly");return t(),k("div",null,[s[0]||(s[0]=l("h1",{id:"skill-与-mcp-深度对比-一-token-占用与设计模式",tabindex:"-1"},[g("Skill 与 MCP 深度对比（一）：Token 占用与设计模式 "),l("a",{class:"header-anchor",href:"#skill-与-mcp-深度对比-一-token-占用与设计模式","aria-label":'Permalink to "Skill 与 MCP 深度对比（一）：Token 占用与设计模式"'},"​")],-1)),d(p,null,{default:E(()=>{var i,n;return[(((i=a.$frontmatter)==null?void 0:i.aside)??!0)&&(((n=a.$frontmatter)==null?void 0:n.showArticleMetadata)??!0)?(t(),u(e,{key:0,article:a.$frontmatter},null,8,["article"])):y("",!0)]}),_:1}),s[1]||(s[1]=c(`<h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><p>首先，官方文档非常值得细细品味，看完官方文档倒也可以考虑不用看其他的文章了：</p><p><a href="https://code.claude.com/docs/zh-CN/skills" target="_blank" rel="noreferrer"># Agent Skills</a></p><p><a href="https://platform.claude.com/docs/zh-CN/agents-and-tools/agent-skills/overview" target="_blank" rel="noreferrer"># Agent Skills 概览</a></p><p><a href="https://docs.anthropic.com/zh-CN/docs/agents-and-tools/mcp" target="_blank" rel="noreferrer"># 通过 MCP 将 Claude Code 连接到工具</a></p><hr><h2 id="一、token-占用对比" tabindex="-1">一、Token 占用对比 <a class="header-anchor" href="#一、token-占用对比" aria-label="Permalink to &quot;一、Token 占用对比&quot;">​</a></h2><h3 id="_1-1-mcp-全量加载模式" tabindex="-1">1.1 MCP：全量加载模式 <a class="header-anchor" href="#_1-1-mcp-全量加载模式" aria-label="Permalink to &quot;1.1 MCP：全量加载模式&quot;">​</a></h3><p>MCP 在会话启动时<strong>全量加载</strong>所有工具定义到上下文：</p><div class="language-plaintext vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>会话启动 → 加载所有 MCP 服务器 → 注入全部工具定义（JSON-Schema）</span></span></code></pre></div><p><strong>就拿我使用的 mcp 来说</strong>：</p><table tabindex="0"><thead><tr><th><strong>MCP 服务器</strong></th><th><strong>工具数</strong></th><th><strong>Token 占用</strong></th></tr></thead><tbody><tr><td>auggie-mcp</td><td>1</td><td>~1k</td></tr><tr><td>grok-search</td><td>5</td><td>~3k</td></tr><tr><td>memory</td><td>9</td><td>~5k</td></tr><tr><td>sequential-thinking</td><td>1</td><td>~2k</td></tr><tr><td><strong>多服务器叠加</strong></td><td>-</td><td><strong>轻松突破 10k+</strong></td></tr></tbody></table><h3 id="_1-2-skill-按需加载模式" tabindex="-1">1.2 Skill：按需加载模式 <a class="header-anchor" href="#_1-2-skill-按需加载模式" aria-label="Permalink to &quot;1.2 Skill：按需加载模式&quot;">​</a></h3><p>Skill 采用<strong>渐进式披露</strong>，仅在需要时加载：</p><table tabindex="0"><thead><tr><th><strong>阶段</strong></th><th><strong>加载内容</strong></th><th><strong>Token 占用</strong></th></tr></thead><tbody><tr><td>启动时</td><td>仅 <code>name</code> + <code>description</code> 索引</td><td>~10-100 tokens/skill</td></tr><tr><td>触发时</td><td>完整 <code>SKILL.md</code> 内容</td><td>~1,000-5,000 tokens/skill</td></tr></tbody></table><p><strong>我使用的 skill</strong>：90K 的 Skills 目录，<code>/context</code> 仅显示 <strong>513 tokens</strong>，和 mcp 对比起来，非常直观。</p><h3 id="_1-3-简单对比" tabindex="-1">1.3 简单对比 <a class="header-anchor" href="#_1-3-简单对比" aria-label="Permalink to &quot;1.3 简单对比&quot;">​</a></h3><table tabindex="0"><thead><tr><th><strong>维度</strong></th><th><strong>MCP</strong></th><th><strong>Skill</strong></th></tr></thead><tbody><tr><td>启动时占用</td><td>全量（10k+ tokens）</td><td>索引（~500 tokens）</td></tr><tr><td>触发时占用</td><td>无额外占用</td><td>按需加载（1k-5k tokens）</td></tr><tr><td>总 Token 效率</td><td>❌ 高占用</td><td>✅ 高效</td></tr><tr><td>适用场景</td><td>小规模工具集成</td><td>大规模工具生态</td></tr></tbody></table><h2 id="二、设计模式对比" tabindex="-1">二、设计模式对比 <a class="header-anchor" href="#二、设计模式对比" aria-label="Permalink to &quot;二、设计模式对比&quot;">​</a></h2><h3 id="_2-1-mcp-全量注入-json-schema" tabindex="-1">2.1 MCP：全量注入 + JSON-Schema <a class="header-anchor" href="#_2-1-mcp-全量注入-json-schema" aria-label="Permalink to &quot;2.1 MCP：全量注入 + JSON-Schema&quot;">​</a></h3><h4 id="什么是-mcp" tabindex="-1">什么是 MCP？ <a class="header-anchor" href="#什么是-mcp" aria-label="Permalink to &quot;什么是 MCP？&quot;">​</a></h4><p>MCP (Model Context Protocol) 是 Anthropic 推出的标准化协议，允许 AI 模型与外部工具安全交互。MCP 的核心思想是将外部工具抽象为标准化接口，通过 JSON-RPC 2.0 协议进行通信。</p><h4 id="mcp-server-目录结构-这里以-python-为例" tabindex="-1">MCP Server 目录结构（这里以 Python 为例） <a class="header-anchor" href="#mcp-server-目录结构-这里以-python-为例" aria-label="Permalink to &quot;MCP Server 目录结构（这里以 Python 为例）&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mcp-server/</span></span>
<span class="line"><span>├── pyproject.toml</span></span>
<span class="line"><span>├── src/</span></span>
<span class="line"><span>│   └── mcp_server/</span></span>
<span class="line"><span>│       ├── __init__.py</span></span>
<span class="line"><span>│       ├── server.py</span></span>
<span class="line"><span>│       └── tools/</span></span>
<span class="line"><span>│           ├── __init__.py</span></span>
<span class="line"><span>│           ├── tool1.py</span></span>
<span class="line"><span>│           └── tool2.py</span></span></code></pre></div><h4 id="tool-定义示例" tabindex="-1">Tool 定义示例 <a class="header-anchor" href="#tool-定义示例" aria-label="Permalink to &quot;Tool 定义示例&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mcp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Tool</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Any, Dict</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@server.tool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> search_web</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(query: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Search the web for information.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Args:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        query: The search query string</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Returns:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Dict containing search results</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Tool implementation</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;results&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}</span></span></code></pre></div><h4 id="客户端配置结构-mcpservers" tabindex="-1">客户端配置结构（mcpServers） <a class="header-anchor" href="#客户端配置结构-mcpservers" aria-label="Permalink to &quot;客户端配置结构（mcpServers）&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;web-search&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@modelcontextprotocol/server-brave-search&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;env&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;BRAVE_API_KEY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-api-key&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;filesystem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@modelcontextprotocol/server-filesystem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/tmp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-2-skill-渐进式披露-markdown" tabindex="-1">2.2 Skill：渐进式披露 + Markdown <a class="header-anchor" href="#_2-2-skill-渐进式披露-markdown" aria-label="Permalink to &quot;2.2 Skill：渐进式披露 + Markdown&quot;">​</a></h3><h4 id="什么是-skill" tabindex="-1">什么是 Skill？ <a class="header-anchor" href="#什么是-skill" aria-label="Permalink to &quot;什么是 Skill？&quot;">​</a></h4><p>Skill 是 Claude Code 的扩展机制，允许开发者创建可重用的工具和知识库。Skill 使用 Markdown 格式定义，采用渐进式披露的设计理念。</p><h4 id="skill-目录结构-双层架构" tabindex="-1">Skill 目录结构（双层架构） <a class="header-anchor" href="#skill-目录结构-双层架构" aria-label="Permalink to &quot;Skill 目录结构（双层架构）&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>.claude/</span></span>
<span class="line"><span>├── skills/</span></span>
<span class="line"><span>│   ├── search.skill/</span></span>
<span class="line"><span>│   │   ├── SKILL.md</span></span>
<span class="line"><span>│   │   └── implementation.js (optional)</span></span>
<span class="line"><span>│   └── coding.skill/</span></span>
<span class="line"><span>│       ├── SKILL.md</span></span>
<span class="line"><span>│       └── utils/</span></span>
<span class="line"><span>│           └── helpers.js</span></span></code></pre></div><h4 id="核心设计原则" tabindex="-1">核心设计原则 <a class="header-anchor" href="#核心设计原则" aria-label="Permalink to &quot;核心设计原则&quot;">​</a></h4><ol><li><strong>渐进式披露</strong>：只在需要时显示详细信息</li><li><strong>Markdown 优先</strong>：使用人类可读的格式</li><li><strong>模块化设计</strong>：每个 Skill 独立封装</li><li><strong>版本控制友好</strong>：基于文件系统的版本管理</li></ol><h4 id="渐进式披露模式" tabindex="-1">渐进式披露模式 <a class="header-anchor" href="#渐进式披露模式" aria-label="Permalink to &quot;渐进式披露模式&quot;">​</a></h4><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># Skill Name</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Brief description of what this skill does.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## Usage</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">How to use this skill with examples.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## Advanced Features</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Detailed documentation for advanced users.</span></span></code></pre></div><hr><p><em>本部分介绍了 Skill 和 MCP 在 Token 占用和设计模式上的核心差异。下一部分将继续探讨版本管理和最佳实践。</em></p>`,39))])}const B=r(m,[["render",C]]);export{S as __pageData,B as default};
